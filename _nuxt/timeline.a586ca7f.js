import{_ as z}from"./HeaderViz.194764a4.js";import{_ as H,a as G}from"./AuthorCard.d510789a.js";import{_ as K,a as Q}from"./BaseLoader.73feba50.js";import{a as w,l as _,w as L,b as q,m as J,e as N,f as v,u as f,p as I,q as W,F as X,i as Z,o as T}from"./entry.5e82415a.js";import"./nuxt-link.53277c78.js";import"./_plugin-vue_export-helper.c27b6911.js";const ee={key:0,class:"py-12"},te=Z('<div class="border-2 border-gray-800 rounded-md border-dotted"><div class="p-2 flex justify-end gap-4"><div class="flex items-end"><svg class="w-4 h-4 inline-block"><circle cx="6" cy="6" r="6" fill="var(--beige)"></circle></svg><span class="text-beige text-sm font-bold">Meetings</span></div><div><svg class="w-4 h-4 inline-block"><circle cx="6" cy="6" r="6" fill="var(--dark-brown)"></circle></svg><span class="text-dark-brown text-sm font-bold">Material Exchanges</span></div><div><svg class="w-4 h-4 inline-block"><circle cx="6" cy="6" r="6" fill="var(--light-brown)"></circle></svg><span class="text-light-brown text-sm font-bold">Publications</span></div></div><div class="my-2" id="timeline"></div></div><div class="p-48"></div>',2),ce={__name:"timeline",setup(ae){const S=w("allAuthors"),x=_("block");L(()=>S.value,(V,y)=>{x.value="none"}),q(()=>{S.value.length>0&&(x.value="none")});const m=_(["Meetings","Material Exchanges","Publications"]),b=_(""),M=_(""),E=_(""),A=_(""),C=w("popupVisible",()=>!1),P=w("peopleDataset"),R=w("meetingsAgg"),F=w("documentsDataset"),U=w("materialDataset");return L(()=>[b.value,m.value],(V,y)=>{const j=document.getElementById("timeline");j.innerHTML="";const r=P.value.filter(e=>e.ID_1==b.value)[0];M.value={name:r.ID_1,dob:r["Date of birth"],dod:r["Date of death"],occupation:r.Occupation,orientation:r["Sexual orientation"]};const u=[];if(r["Date of birth"]!=null){let e="";r.Name!=null&&(e="("+r.Name+")"),u.push({id:"dob",content:`Date of Birth ${e}`,start:r["Date of birth"],className:"metaClass gray",showMajorLabels:!1})}r["Date of death"]!=null&&u.push({id:"dod",content:"Date of Death",start:r["Date of death"],className:"metaClass gray",showMajorLabels:!1});let o=[];o=R.value.filter(e=>e.participants.includes(b.value));for(let e=0;e<o.length;e++)if(o[e].dateStart!=null&&o[e].location!=null&&o[e].notes!=null&&m.value.includes("Meetings")){let t=o[e].participants.filter(l=>l!=b.value);t.length===2?t=t.join(" and ").replaceAll(/["]/g,"'"):t.length>2?t=t.join(", ").replaceAll(/["]/g,"'"):t=t.join("").replaceAll(/["]/g,"'");const i=o[e].location;let s=[],n="<br>";for(let l=0;l<o[e].participants.length;l++){s.push({name:o[e].participants[l],dob:o[e].dob[l],dod:o[e].dod[l],nationality:o[e].nationality[l],sexuality:o[e].sexuality[l],job:o[e].job[l]});let h="a",p="^[aieouAIEOU].*";s[l].nationality.join("/").split("")[0].match(p)&&(h="an"),n+=`
          ● ${s[l].name} (${s[l].dob} — ${s[l].dod}) was ${h} 
          ${s[l].nationality.join("/")}, ${s[l].sexuality}, ${s[l].job.join(", ")}.
          <br>
        `}n+="<br>",n=n.replaceAll(/["]/g,"'"),u.push({id:"meeting-"+e,content:`Meeting with ${t} in ${i}`,title:o[e].notes.slice(0,50),start:o[e].dateStart,dateStart:o[e].dateStart,dateEnd:o[e].dateEnd,participants:n,className:"metaClass beige",description:`Meeting with ${t} in ${i}`,source:o[e].source,page:o[e].page,notes:o[e].notes})}const c=F.value.filter(e=>e.author==r.createdPerson);for(let e=0;e<c.length;e++)c[e].pubYear!=null&&m.value.includes("Publications")&&u.push({id:"document-"+e,content:c[e].title,title:c[e].title,start:c[e].pubYear,dateStart:c[e].pubYear,className:"metaClass light-brown",description:c[e].title,notes:c[e].notes,pub:c[e].pub});const a=U.value.filter(e=>e.authorUnified==r.createdPerson);for(let e=0;e<a.length;e++)if(a[e].dateStart!=null&&m.value.includes("Material Exchanges")){let t="";a[e].type==="Letter"?t=`Letter to ${a[e].participants}`:a[e].type==="Allusion"&&a[e].document!=null&&a[e].participants.length===0?t=`Allusion to <span class='italic'>${a[e].document.split(":")[0].split("by")[0]}</span>`:a[e].type==="Viewing"&&a[e].document!=null&&a[e].participants.length===0?t=`Viewing of ${a[e].document.split(":")[0].split("by")[0]}`:a[e].type==="Allusion"&&a[e].participants.length>0?t=`Allusion to ${a[e].participants.join(", ")}`:a[e].type==="Reading"?t=`Reading of ${a[e].document.split(":")[0].split("by")[0]}`:a[e].type==="Review"?t=`Review of ${a[e].document.split(":")[0].split("by")[0]}`:t=a[e].type;let i=[],s="<br>";for(let n=0;n<a[e].participants.length;n++){i.push({name:a[e].participants[n],dob:a[e].dob[n],dod:a[e].dod[n],nationality:a[e].nationality[n],sexuality:a[e].sexuality[n],job:a[e].job[n]});let l="a",h="^[aieouAIEOU].*";i[n].nationality.join("/").split("")[0].match(h)&&(l="an"),s+=`
          ● ${i[n].name} (${i[n].dob} — ${i[n].dod}) was ${l} 
          ${i[n].nationality.join("/")}, ${i[n].sexuality}, ${i[n].job.join(", ")}.
          <br>
        `}s+="<br>",s=s.replaceAll(/["]/g,"'"),u.push({id:"material-"+e,content:t,start:a[e].dateStart,dateStart:a[e].dateStart,dateEnd:a[e].dateEnd,className:"metaClass dark-brown",description:t,source:a[e].source,page:a[e].page,notes:a[e].notes,participants:s})}let g=r["Date of birth"],D=r["Date of death"];g=(Number(g.split("-")[0])-20).toString()+"-01-01",D=(Number(D.split("-")[0])+20).toString()+"-01-01";const O={template:function(e,t,i){let s;return i.id.split("-")[0]==="document"?s="<span class='italic'>"+e.content+"</span>":i.id.split("-")[0]==="material"&&e.content.includes("of")?s=e.content.split("of")[0]+` of <span class='italic'>${e.content.split("of")[1]}</span>`:s=e.content,i.notes!=null&&(i.notes=i.notes.replaceAll(/["]/g,"'")),i.source!=null&&(i.source=i.source.replaceAll(/["]/g,"'")),`
        <div 
          id='${i.id}' 
          data-description="${i.description}"
          data-date-start="${i.dateStart}"
          data-date-end="${i.dateEnd}"
          data-source="${i.source}"
          data-page="${i.page}"
          data-participants="${i.participants}"
          data-notes="${i.notes}"
          data-pub="${i.pub}"
        >
          ${s}
        </div>`},xss:{disabled:!1,filterOptions:{whiteList:{div:["class","id","data-description","data-date-start","data-date-end","data-source","data-page","data-participants","data-notes","data-pub"],span:["class"]}}},tooltip:{followMouse:!0,overflowMethod:"cap"},maxHeight:"600px",min:g,max:D},Y=new vis.DataSet(u);new vis.Timeline(j,Y,O).on("select",function(e){const t=document.getElementById(e.items[0]);if(t.id!="dob"&&t.id!="dod"){const i=t.dataset.dateStart;let s="",n="",l="",h="",p="",k="",B="";if(t.dataset.notes!="undefined"){p=": "+t.dataset.notes,p=p.split("_");const d=[];for(let $=0;$<p.length;$++)d.push(p[$]),$%2==0&&$<p.length-1?d.push("<i>"):$%2==1&&d.push("</i>");p=d.join("")}if((t.id.split("-")[0]=="meeting"||t.id.split("-")[0]=="material")&&t.dataset.participants!="<br><br>"&&(l=`
          <div><span class='font-sans font-bold'>Participants: </span>${t.dataset.participants}</div>
        `),t.id.split("-")[0]!="document"){t.dataset.dateEnd!="undefined"?s=" — "+t.dataset.dateEnd:s=" — ?";let d=t.dataset.page;d.includes("-")?d="pp. "+d:d="p. "+d,n=t.dataset.source,h=`
          <div>
            <span class='font-sans font-bold'>Source: </span>
            <span class='italic'>${n.split("_")[0].split("by")[0]}</span> by <span>${n.split("_")[0].split("by")[1]}</span>
            (${d})
          </div>
          `,B=`
        <div class="pb-2 my-2 border-b border-dashed border-gray-500 text-sm">
          <div class="py-2">
            <span class='font-sans font-bold'>
              ${i}${s}
            </span><span class=''>${p}</span>
          </div>
        `}else{let d="?";t.dataset.pub!="undefined"&&(d=t.dataset.pub),k=`
          <div>
            <span class='font-sans'>Published by </span>
            <span class=''>${d}</span>
            in <span class='font-bold'>${i}</span>
          </div>
      `}E.value=k+B+l+h+`
          </div>
        `,t.dataset.pub!="undefined"&&t.dataset.pub!=null?A.value=`<span class='italic'>${t.dataset.description}</span> (${i.split("-")[0]})`:t.dataset.description.includes("Reading of")?A.value=`Reading of <span class='italic'>${t.dataset.description.split("Reading of")[1]}</span> (${i.split("-")[0]})`:A.value=t.dataset.description+` (${i.split("-")[0]})`,C.value=!0}})}),(V,y)=>{const j=z,r=H,u=Q,o=K,c=J("FormKit"),a=G;return T(),N(X,null,[v(j),v(r,{description:f(E),title:f(A)},null,8,["description","title"]),v(u,{title:"Timeline of Author Meetings and Material Exchanges",part1:`
    If you select an author from the drop-down menu below, it will generate a timeline of all their meetings and material exchanges with other LGBTQ+ exile writers organized according to date. Material exchanges indicate instances where one LGBTQ+ exile writer read, reviewed, or alluded to another writer and their work or corresponded with them. 
    You can choose to view meetings, material exchanges, or a particular author’s publications by selecting the boxes directly above the timeline.`,part2:`
If you click on a particular point on the timeline, a pop-up box will give you further information about a particular meeting or creative exchange between writers. To isolate a particular section of the timeline, you can zoom in or out using your mouse.
      `}),v(o,{displayLoader:f(x),padding:"py-44"},null,8,["displayLoader"]),f(x)!="block"?(T(),N("div",ee,[v(c,{modelValue:f(b),"onUpdate:modelValue":y[0]||(y[0]=g=>I(b)?b.value=g:null),type:"select",label:"Select an Author",name:"author","inner-class":"ring-0 focus-within:ring-gray-500",options:f(S)},null,8,["modelValue","options"]),v(a,{authorInfo:f(M)},null,8,["authorInfo"]),v(c,{modelValue:f(m),"onUpdate:modelValue":y[1]||(y[1]=g=>I(m)?m.value=g:null),type:"checkbox",label:" ",options:["Meetings","Material Exchanges","Publications"],help:" ","outer-class":"mt-12 !mb-0","fieldset-class":"border-0","options-class":"flex gap-8","wrapper-class":"!items-end border-0","decorator-class":"text-gray-500 peer-checked:ring-gray-500 peer-checked:text-gray-500"},null,8,["modelValue"]),te])):W("",!0)],64)}}};export{ce as default};
